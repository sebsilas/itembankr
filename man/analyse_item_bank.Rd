% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analyse_item_bank.R
\name{analyse_item_bank}
\alias{analyse_item_bank}
\title{Analyse a single item bank (music corpus)}
\usage{
analyse_item_bank(
  item_bank,
  item_bank_name = "Bank",
  include = NULL,
  exclude = NULL,
  id_cols = "item_id",
  standardise = TRUE,
  pa_type = c("pc", "fa"),
  max_plots = 36,
  seed = 123,
  verbose = TRUE,
  rotate = c("none", "varimax", "promax", "oblimin", "equamax"),
  name_top = 2
)
}
\arguments{
\item{item_bank}{Data frame with (mostly) numeric feature columns.}

\item{item_bank_name}{Character name for the bank (used in plots/tables).}

\item{include, exclude}{Optional tidyselect/character to filter features.}

\item{id_cols}{Character of columns to exclude from features.}

\item{standardise}{Logical; scale/center features before PA/PCA.}

\item{pa_type}{"pc" or "fa" for how many dimensions to retain from PA.}

\item{max_plots}{Cap the number of violin facets.}

\item{seed}{RNG seed.}

\item{verbose}{Print CLI progress/tables.}

\item{rotate}{Rotation for `psych::principal()`: one of
"none","varimax","promax","oblimin","equamax".}

\item{name_top}{Integer; how many top-loading features to include in
each component's label (default 2).}
}
\value{
A list: descriptives tibble, violin plot, PA selection,
        PCA loadings/scores (named), and PC score summaries/plot.
}
\description{
Summarises feature distributions, runs a robust parallel analysis,
fits PCA via `psych::principal()`, and names components by their
top-loading features.
}
\examples{
set.seed(456)

res1 <- analyse_item_bank(
  item_bank   = Berkowitz::phrase_item_bank,
  item_bank_name   = "Berkowitz",
  standardise = TRUE,
  pa_type     = "pc",
  rotate      = "oblimin",
  name_top    = 3L,
  max_plots   = 12,
  verbose     = FALSE
)

# --- Numeric summaries ---
head(res1$descriptives)

# --- PCA outputs (single bank) ---
colnames(res1$pca$model$rotation)  # component names with top-loading features
res1$pca$score_summary

# --- Categorical outputs (single bank) ---
# Long rows (feature, level â€“ with .bank for consistency)
res1$categoricals$long |> dplyr::distinct(feature) |> dplyr::arrange(feature)
# Per-feature diversity summary (n_levels, entropy, top_level, top_prop)
res1$categoricals$summary |>
  dplyr::arrange(dplyr::desc(entropy)) |>
  dplyr::slice_head(n = 5)

# --- Plots (not run on CRAN) ---
\donttest{
  res1$violin_plot
  res1$pca$density_plot
  res1$categoricals$plot
}
}
